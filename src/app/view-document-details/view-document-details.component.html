<!-- <p>view-document-details works!</p>
{{title}}

{{document_list}} -->


<div class="hidden2 flex w-full">
  <div class="container1 w-full main_canvas p-3_bk flex">

    <div class="w-full">
      <div class="imagestatus_block">

        <!--PDF titles start-->
        <div [ngClass]="{'hidden': !isPdfVisible}" class="pdf_titles">
          <div class="pdf_title_fixed bg-[#fff] border border-gray-200 shadow-lg py-3 px-3 h-full overflow-y-auto">
            <div class="mb-2">
              <span class="font-semibold capitalize">{{DocumentTitle}}</span>
            </div>


            <div class="table-responsive">
              <table class="table">
                <thead class="text-gray-700 uppercase bg-[#c7d0e0] text-left">
                  <tr>
                    <th>#</th>
                    <th>Title</th>
                  </tr>
                </thead>
                <!-- <tbody cdkDropList (cdkDropListDropped)="drop($event)"> -->
                  <tbody>
                  <!-- <tr *ngFor="let item of document_list; let i = index" cdkDrag class="text-left"> -->
                    <tr *ngFor="let item of document_list; let i = index" class="text-left">
                    <td>{{ i + 1 }}</td>
                    <td class="flex items-center justify-between text-left">
                      <span class="cursor-pointer" (click)="redirectToPage('SelectedTitle', item.title, selectedid, i)">{{ item?.title }}  </span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>


          </div>
        </div>
        <!--PDF titles end-->

        <!--PDF fixed block start-->
        <div class="image-uploader">
          <div class="preview">
            <div class="pdf_fixed">
              <div class="w-full flex items-center justify-between">
                <div class="">
                  <div class="imgs_tab">
                    <ul>

                      <li style="background:#5286bc!important;" title="View Documents" (click)="togglePdfVisibility()"
                        *ngIf="!isPdfVisible">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentcolor"
                          class="w-4 h-4">
                          <path
                            d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z" />
                        </svg>
                      </li>

                      <li style="background:#3629B7!important;" title="View Documents" *ngIf="isPdfVisible"
                        (click)="togglePdfVisibility()">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" fill="currentcolor"
                          class="w-4 h-4">
                          <path
                            d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z" />
                        </svg>
                      </li>

                      <li id="mail" [class.tab_active]="id === 'mail'" (click)="tabchange('mail')" title="Splitted PDF">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentcolor"
                          class="w-4 h-4">
                          <path
                            d="M384 480l48 0c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1 .1-32.1S555.5 224 544 224l-400 0c-11.4 0-21.9 6-27.6 15.9L48 357.1 48 96c0-8.8 7.2-16 16-16l117.5 0c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8L416 144c8.8 0 16 7.2 16 16l0 32 48 0 0-32c0-35.3-28.7-64-64-64L298.5 96c-17 0-33.3-6.7-45.3-18.7L226.7 50.7c-12-12-28.3-18.7-45.3-18.7L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l23.7 0L384 480z" />
                        </svg>
                      </li>
                      <li id="attachment" [class.tab_active]="id === 'attachment'" (click)="tabchange('attachment')"
                        title="OCR Data">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" fill="currentcolor"
                          class="w-4 h-4">
                          <path
                            d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z" />
                        </svg>
                      </li>
                      <li style="background:#5286bc!important;" title="PDF">
                        <a href={{file_path}} target="_blank">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentcolor"
                            class="w-4 h-4">
                            <path
                              d="M64 464l48 0 0 48-48 0c-35.3 0-64-28.7-64-64L0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 304l-48 0 0-144-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16zM176 352l32 0c30.9 0 56 25.1 56 56s-25.1 56-56 56l-16 0 0 32c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-48 0-80c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0 48 16 0zm96-80l32 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-32 0c-8.8 0-16-7.2-16-16l0-128c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16l0-64c0-8.8-7.2-16-16-16l-16 0 0 96 16 0zm80-112c0-8.8 7.2-16 16-16l48 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 32 32 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 48c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-64 0-64z" />
                          </svg>
                        </a>
                      </li>

                      <li style="background:#5286bc!important;" (click)="openDialog(selectedid)" title="View Documents">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentcolor"
                          class="w-4 h-4">
                          <path
                            d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z" />
                        </svg>
                      </li>

                      <li style="background:#5286bc!important;" (click)="editItem(selectedid)" title="Edit">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentcolor"
                          class="w-4 h-4">
                          <path
                            d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z" />
                        </svg>
                      </li>


                    </ul>
                  </div>
                </div>
                <div class="flex items-center justify-end gap-3 mt-2 pb-4">

                  <div class="pdf_buttons mr-2">
                    <div class="pdf_btninner">
                      <button (click)="zoomIn()" title="Zoom In" class="pdfbtn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-4 h-4" fill="currentcolor">
                          <path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"/>
                        </svg>
                      </button>
                      <button (click)="zoomOut()" title="Zoom Out" class="pdfbtn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-4 h-4" fill="currentcolor">
                          <path d="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"/>
                        </svg>
                      </button>
                      <button (click)="rotate()" title="Rotate" class="pdfbtn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-4 h-4" fill="currentcolor">
                          <path d="M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"/>
                        </svg>
                      </button> 
                    </div>
                  </div>

                  <button title="Previous" (click)="previousImage()" [disabled]="currentIndex === 0"
                    class="flex items-center justify-center text-center text-white text-[12px] bg-[#333] hover:bg-[#000] px-2 py-1 rounded-[4px] cursor-pointer font-medium">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" fill="currentcolor" class="w-4 h-4">
                      <path
                        d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z" />
                    </svg>
                  </button>
                  <button title="Next" (click)="nextImage()" [disabled]="currentIndex === datas.length - 1"
                    class="flex items-center justify-center text-center text-white text-[12px] bg-[#08a0e1] hover:bg-[#08a0e1]/90 px-2 py-1 rounded-[4px] cursor-pointer font-medium">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" fill="currentcolor" class="w-4 h-4">
                      <path
                        d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z" />
                    </svg>
                  </button>
                </div>
              </div>

              image
              <div class="imgs_content">

                <div class="content-value" *ngIf="id === 'mail'">
                  <!-- <img src="assets/images/email_img1.jpg" class="w-full" alt="img"> -->
                  <div  class="image-gallery overflow-y-auto"
                    style="width: 100%; height:calc(100vh - 75px);" *ngIf="selectedImages.length >0">

                    <div *ngFor="let image of selectedImages; let i = index" class="image-container zoom-image-container" >
                       
                      <!-- <img [src]="'data:image/png;base64,' + image" alt="Selected Image {{i + 1}}" 
                        style="width: 100%; height: auto;" /> -->
                      <img [src]="'data:image/png;base64,' +  image" id="imageTiff" class="image-istiff "  
                      style="width: 100%; height: auto;">
                    </div>
                  </div>
                  <!-- <pdf-viewer               
                    src="{{file_path}}"
                     [zoom]="zoom" 
                     [render-text]="true"
                     [original-size]="false"
                     [show-all]="true"
                     [rotation]="rotation"
                     [autoresize]="true"
                     pagemode="none"
                     style="width: 100%; height:calc(100vh - 75px);"></pdf-viewer> -->
                   
                </div>
                <div class="content-value" *ngIf="id === 'attachment'">
                  <!-- <img src="assets/images/attachement_img1.jpg" class="w-full" alt="img">  -->
                  <div class="p-2 bg-white overflow-y-auto" style="width: 100%; height:calc(100vh - 75px);"
                    *ngIf="selectedData">
                    <div [innerHTML]="formatOcrResultText" class="space-y-3"></div>
                  </div>

                </div>

              </div>


            </div>
          </div>
        </div>
        <!--PDF fixed block end-->
        <!--Form block start-->
        <div [ngClass]="isPdfVisible ? 'form-display2 pl-3' : 'form-display pl-3'">


          <div class="flex items-center justify-between gap-2 mb-3">
            <div class="flex items-center justify-between gap-2">
              <div class="text-[15px] font-[600]">Title: {{title1}}</div>
              <div class="flex items-center gap-3 ml-6" *ngIf="selectedData">
                <div class="text-[13px] flex items-center gap-1" title="Start Page">
                  <span class="font-[600]" title="">
                    Start:
                    <!-- <svg class="w-6 h-6 rotate-180" fill="currentcolor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
                      <path d="M238.506667 316.16L434.346667 512l-195.84 195.84L298.666667 768l256-256-256-256zM682.666667 256h85.333333v512h-85.333333z"  />
                    </svg> -->
                  </span>
                  <span>{{startpage}}</span>
                </div>

                <div class="text-[13px] flex items-center gap-1" title="End Page">
                  <span class="font-[600]" title="">
                    END:
                  </span>
                  <span>{{endpage}}</span>
                  <!-- <span class="" title="">
                    <svg class="w-6 h-6" fill="currentcolor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
                      <path d="M238.506667 316.16L434.346667 512l-195.84 195.84L298.666667 768l256-256-256-256zM682.666667 256h85.333333v512h-85.333333z"  />
                    </svg>
                  </span>  -->
                </div>


              </div>
            </div>
            <!-- <div class="text-[16px] font-[600]" *ngIf="selectedFormTitle">{{ selectedFormTitle }}</div> -->
            <!-- <div class="">
              <select id="formsSelect" [(ngModel)]="selectedForm" (change)="onFormChange($event)" class="form-control">
                <option value="form_1" data-title="Deeds">Deeds</option>
                <option value="form_2" data-title="Easements">Easements</option>
                <option value="form_3" data-title="DOT">DOT</option>
                <option value="form_4" data-title="Judgment">Judgment</option>
                <option value="form_5" data-title="Mechanical Lien">Mechanical Lien</option>                
              </select>              
            </div>           -->
            <div class="">
              <select id="formsSelect" [(ngModel)]="selectedFormname" (change)="onFormChange($event)"
                class="form-control">
                <option *ngFor="let form of formsnames" [value]="form" [attr.data-title]="form">{{ form }}</option>
              </select>
            </div>

          </div>



          <div class="bg-[#fff] border border-gray-200 shadow-lg py-3 px-3 max-h-[800px] overflow-y-auto"
            *ngIf="selectedFormname === 'form_1'">
            <form cla [formGroup]="formData" (ngSubmit)="onSubmit()" novalidate>
              <div *ngFor="let field of extractedFields | keyvalue">
                <div class="form-group">
                  <label>{{ field.key }}:</label>
                  <input type="text" name="{{field.key}}" value="{{field.value}}" autocomplete="off"
                    class="form-control">
                </div>
              </div>
            </form>
          </div>


          <!--Form1-->
          <div class="form_outer text-left" *ngIf="selectedFormname !== 'form_1'">
            <div class="for_m-builder">
              <div class="w-full block ">
                <div class="bg-[#fff] border border-gray-200 shadow-lg py-3 px-3 max-h-[800px] overflow-y-auto">

                  <!-- Start Accordation Block-->
                  <div class="form_accordion12">
                    <!-- <form>
                      
                    
                        <div class="accordion-item" >
                          <div class="accordion-title" (click)="toggle(0)" *ngFor="let tab of selectedform.tabs;let i = index" (click)="setActiveTab(i)">
                           {{tab.name}}
                            <span class="custom-arrow" [ngClass]="{ 'rotate': activeSection === 0 }"></span>
                          </div>
                          <div class="accordion-content" [ngClass]="{ 'open': activeSection === 0 }">
                            <div *ngIf="activeTab">
                            <div class="grid grid-cols-1 lg:grid-cols-1 gap-2" *ngFor="let group of activeTab.groups; let groupIndex = index">
                                <div class="col-span-2" *ngFor="let component of group.components; let i = index">
                                  <label class="form_label">{{component.label}}</label>
                                  <input type="text" class="form-control" placeholder=""  [attr.name]="component.label" 
                                  [attr.id]="component.label"> 
                                </div> 
                            </div>
                          </div>
                          </div>
                        </div>
                      
                       
                    </form> -->

                    <form>
                      <!-- <input type="text" 
                      class="form-control" 
                      placeholder=""  
                      name="Document Title"
                      id="Document Title"> -->

                      <div class="accordion-item1" *ngFor="let tab of selectedform.tabs; let i = index">

                        <div class="accordion-title" (click)="setActiveSection(i)">
                          {{tab.name}}
                          <span class="custom-arrow" [ngClass]="{ 'rotate': activeSection === i }"></span>
                        </div>

                        <!-- <div class="accordion-content " [ngClass]="{ 'open': activeSection === i }" *ngIf="activeSection === i"> -->

                        <div class="accordion-content open">
                          <div *ngIf="tab.groups">
                            <div class="grid grid-cols-1 lg:grid-cols-1 gap-2" *ngFor="let group of tab.groups">
                              <div class="col-span-2" *ngFor="let component of group.components">
                                <label class="form_label">{{component.label}}</label>
                                <input type="text" class="form-control" placeholder="" [attr.name]="component.label"
                                  [attr.id]="component.label" #formInput>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>


                  </div>
                  <!-- End Accordation Block-->

                </div>
              </div>
            </div>
          </div>




        </div>
        <!--Form block end-->
      </div>
    </div>

  </div>
  
  <!-- <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "ball-atom" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner> -->
</div>

